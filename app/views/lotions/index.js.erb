// var thing = '<%= j render @lotions %>';
// $("#lotions").append(thing).masonry({
//   lotionSelector : '.lotion',
//   columnWidth : 290,
//   isAnimated: true
// },'appended', thing);
// var thing = [];
// <% @lotions.each do |lotion| %>
//   thing.push('<%= j render lotion %>');
// <% end %>
// console.log(thing);
// $("#lotions").masonry('addItems', thing).masonry('layout');
$(window).off('scroll');
var thing = '<%= j render @lotions %>';
var $newElements = $(thing).css({opacity: 0});
// $("#lotions").append('<%= j render @lotions %>');
$("#lotions").append($newElements);

var $container = $('#lotions');
    $newElements.imagesLoaded(function(){
    $newElements.animate({opacity: 1});
    $container.masonry(
      'appended',
      $newElements,
      true
    );
  });

//console.log("test");
//$('#lotions').append('<%= j render @lotions %>');
<% if @lotions.next_page %>
  setOnScroll();
  $('.pagination').replaceWith('<%= j will_paginate @lotions %>');
<% else %>
  $(window).off('scroll');
  $('.pagination').remove();
<% end %>
